<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">





<style>

    body{
        background: #222;
    }



    .form-control{
        height: 55px;
        width: 55px;
        text-align: center;
        font-size: 30pt;
        background: #333;
        color: 333;
        border: 1px solid #0d6efd;;
        
    }
    td{
        padding: 10px;
    }
    .hidden{
        display: none;
    }

    input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        display: none;
      }
.keypads{
    margin: 0 auto;
    background: red;
    left: 0; right: 0;
    width: 400px;
}
    .singlekey{
        padding: 15px;
        float: left;
        list-style: none;
        justify-content: center;
    line-height: 30px;
    cursor: pointer;

    }
    .singlekey div{
        background: #333;
        text-align: center;
        padding: 20px;
       height: 70px;
				width: 70px;
        border-radius: 50%;
        font-size: 20pt;
    }
</style>

<div class="container">
<div class="row">
   <div align="center"> <h1 style="color: white">Authorization Pin   <br><small style="font-size: 12pt">For extra security you are required to set a 4 digit Pin</small></h1></div>

    <div class="col-md-12 First_Try" align="center" style=" margin-top: 1cm;">
        <h1 style="color: white">Create Pin</h1>

        <table >
            <tr><td><input type="number" class="form-control pin" id="pin1"  placeholder="" readonly/></td><td><input type="number" class="form-control pin"  id="pin2"   placeholder="" disabled readonly/></td><td><input type="number" class="form-control pin" id="pin3"  placeholder="" disabled readonly/></td><td><input type="number" class="form-control pin" id="pin4"   placeholder="" disabled readonly/></td></tr>
        </table>
        <div class="form-group spi"style="padding: 30px"></div>

    </div>

    <div class="col-md-12 Confirm_Pin hidden" align="center"  style=" margin-top: 1cm;">
        <h1 style="color: white">Confirm Pin</h1>
      
        <table>
            <tr><td><input type="number" class="form-control pin" id="pin5" placeholder="" readonly/></td><td><input type="number" class="form-control pin"  id="pin6" placeholder="" disabled readonly/></td><td><input type="number" class="form-control pin" id="pin7" placeholder="" disabled readonly/></td><td><input type="number" class="form-control pin" id="pin8" placeholder="" disabled readonly/></td></tr>
        </table>

    
    <div class="form-group spi"></div>
       
   
    </div>
</div>
</div>
<div class="keycontainer">
    <ul class="keypads"></ul>

</div>

<script>

var current=1;
var next=current+1;
$(document).keyup(function(event){
    if(event.keyCode==8){
        $('.pin').prev().focus()
    }

})

var current=0;

$('.pin').keyup(function(){
    current++;
    var next=current+1;
    if(event.keyCode!=8){
        if(next==5){
            var password1=$('#pin1').val();
        var password2=$('#pin2').val();
        var password3=$('#pin3').val();
        var password4=$('#pin4').val();

        if(password1!=""&& password2!="" && password3!="" &&password4!=""){
            setTimeout(function(){
            $(".Confirm_Pin").removeClass('hidden');
            $(".First_Try").addClass('hidden');
            $('.spi').toggleClass('hidden');
            }, 5000)
        }else{
            alert('Error');
        }
        $('.spi').html("<span class='fa fa-spinner fa-spin' style='font-size: 40pt; color: white'></span>");

        }else if(next==9){
            var password5=$('#pin5').val();
            var password6=$('#pin6').val();
            var password7=$('#pin7').val();
            var password8=$('#pin8').val();
        
        if(password5!=""&& password6!="" && password7!="" &&password8!=""){
                setTimeout(function(){
                alert("You PIN has been set successfully")
                location.reload();

                 }, 5000)
        }else{
            alert('Error');
        }
  
                $('.spi').toggleClass('hidden');
                $('.spi').html("<span class='fa fa-spinner fa-spin' style='font-size: 40pt; color: white'></span>");

 
        }else{
                 $('#pin'+next).prop('disabled',false).focus();

        }
    }else{


    }
})


for(var number=1; number<13; number++) {
  if (number === 11) {
    $('.keypads').append("<li class='singlekey' style='color: white' id='"+0+"'><div>0</div></li>");
  } else if (number === 12) {
    $('.keypads').append("<li class='singlekey' style='color: white' id='"+number+"'><div><i class='fas fa-backspace' style='font-size: 12pt'></i></div></li>");
  } else if (number === 10) {
    $('.keypads').append(" <li class='singlekey' style='color: white' id='" + number + "'><div><i class='fa fa-check' style='font-size: 14pt'></i></div></li>");
  } else {
    $('.keypads').append("<li class='singlekey' style='color: white' id='" + number + "'><div>" + number + "</div></li>");
  }
};

$(document).on('click', '#singlekey13', function(){

} )

$(document).on('click', '.singlekey', function(){

var number=$(this).attr('id');
if(number==12){
$('.pin').prev().focus()
$('.pin').val("");
}else if(number==10){
var pinn1=$('#pin1').val();
var pinn2=$('#pin2').val()
var pinn3=$('#pin3').val();
var pinn4=$('#pin4').val();
var correct_pin=pinn1+pinn2+pinn3+pinn4;
var database_pin="3434";

if(correct_pin==database_pin){
alert("Good, Transaction Successful");
}else{

alert("Incorrect Pin");
}

}else{
current++;
 var next=current+1;
if($('#pin1').val().trim()==""){
$('#pin1').val(number);
$('#pin'+next).prop('disabled',false).focus();
}else if($('#pin2').val().trim()==""){
$('#pin2').val(number);
$('#pin'+next).prop('disabled',false).focus();

}else if($('#pin3').val().trim()==""){
$('#pin3').val(number);
$('#pin'+next).prop('disabled',false).focus();
}else if($('#pin4').val().trim()==""){
$('#pin4').val(number);
$('#pin'+next).prop('disabled',false).focus();
}
}
})


</script>
